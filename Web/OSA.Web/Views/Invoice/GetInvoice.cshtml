@model OSA.Web.ViewModels.Invoices.View_Models.InvoiceBindingViewModel
@inject OSA.Services.Data.ISuppliersService suppliersService
@{
    this.ViewData["Title"] = "Get Invoice";
}
@{int index = 0;} 
<div class="text-center">
    <h3>List of Invoices for @Model.Name</h3>
    <div class="col-md-12">
        <center>
            <table border="0">
                <tr>
                    <th>ID</th>
                    <th>Invoice Number</th>
                    <th>Total Amount</th>
                    <th>Issue Date</th>
                    <th>Supplier Name</th>
                </tr>
                @foreach (var invoice in Model.Invoices)
                {
                    <tr>
                        <td>@(index += 1)</td>
                        <td>@invoice.InvoiceNumber</td>
                        <td>@invoice.TotalAmount.ToString("F")</td>
                        <td>@invoice.Date.ToShortDateString()</td>
                        <td>@await this.suppliersService.GetSupplierNameBySupplierIdAsync(invoice.SupplierId)</td>
                    </tr>
                }
            </table>
            <div align="left" class="col-md-6">Total Amount Sum: @Model.Invoices.Sum(x => x.TotalAmount)</div>
        </center>
    </div>
</div>
@section Scripts {
    <partial name="_ValidationScriptsPartial" />
}
